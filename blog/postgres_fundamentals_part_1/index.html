<!doctype html><html><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>PostgreSQL Fundamentals Part-1 - Arkaprabha Chakraborty</title><link rel=icon type=image/png href=https://images.assetsdelivery.com/compings_v2/uasumy/uasumy1503/uasumy150300032.jpg><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Introduction PostgreSQL was created in 1985 by Micheal Stonebraker. The name came from &ldquo;Post&rdquo;-Ingress. It is a free software which is really easy to learn. You can install postgresql on your system by following the docs or this blog. For starters we use the university dataset from kaggle. This has a simple schema but lot&rsquo;s of data which is kinda useful for practicing indexing.
Creating the database Login to your postgresql interactive terminal using the following bash command:">
<meta property="og:image" content>
<meta property="og:title" content="PostgreSQL Fundamentals Part-1">
<meta property="og:description" content="Introduction PostgreSQL was created in 1985 by Micheal Stonebraker. The name came from &ldquo;Post&rdquo;-Ingress. It is a free software which is really easy to learn. You can install postgresql on your system by following the docs or this blog. For starters we use the university dataset from kaggle. This has a simple schema but lot&rsquo;s of data which is kinda useful for practicing indexing.
Creating the database Login to your postgresql interactive terminal using the following bash command:">
<meta property="og:type" content="article">
<meta property="og:url" content="https://arkaprabhachakraborty.github.io/blog/postgres_fundamentals_part_1/"><meta property="article:section" content="blog">
<meta property="article:published_time" content="2022-09-20T00:00:00+00:00">
<meta property="article:modified_time" content="2022-09-20T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="PostgreSQL Fundamentals Part-1">
<meta name=twitter:description content="Introduction PostgreSQL was created in 1985 by Micheal Stonebraker. The name came from &ldquo;Post&rdquo;-Ingress. It is a free software which is really easy to learn. You can install postgresql on your system by following the docs or this blog. For starters we use the university dataset from kaggle. This has a simple schema but lot&rsquo;s of data which is kinda useful for practicing indexing.
Creating the database Login to your postgresql interactive terminal using the following bash command:">
<script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel=stylesheet>
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel=stylesheet>
<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://arkaprabhachakraborty.github.io/css/main.cceb5a7eebbb93e596164f7d23a3dc2bb87ef2b390efecc09bf6f7503c9192b3.css>
<link id=darkModeStyle rel=stylesheet type=text/css href=https://arkaprabhachakraborty.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css disabled>
<script src=https://cdn.jsdelivr.net/npm/mermaid@9></script>
<script>mermaid.initialize({startOnLoad:!0,theme:localStorage.getItem("theme-storage")})</script></head>
<body>
<div class=content><header>
<div class=main>
<a href=https://arkaprabhachakraborty.github.io//home>Arkaprabha Chakraborty</a>
</div>
<nav>
<a href=/blog/all_of_my_blogs>Blogs</a>
<a href=/posts>Projects</a>
| <a id=dark-mode-toggle onclick=toggleTheme() href></a>
<script src=https://arkaprabhachakraborty.github.io/js/themetoggle.js></script>
</nav>
</header>
<main>
<article>
<div class=title>
<h1 class=title>
PostgreSQL Fundamentals Part-1
</h1>
<div class=meta>
Posted on Sep 20, 2022
</div>
</div>
<section class=body>
<h2 id=introduction>Introduction</h2>
<p>PostgreSQL was created in 1985 by <a href=https://en.wikipedia.org/wiki/Michael_Stonebraker>Micheal Stonebraker</a>. The name came from &ldquo;Post&rdquo;-Ingress. It is a free software which is really easy to learn.
You can install postgresql on your system by following the <a href=https://www.postgresql.org/download/>docs</a> or this <a href=https://www.digitalocean.com/community/tutorials/how-to-install-postgresql-on-ubuntu-20-04-quickstart>blog</a>.
For starters we use the <a href="https://www.kaggle.com/datasets/ananta/student-performance-dataset?select=Department_Information.csv">university dataset</a> from kaggle. This has a simple schema but lot&rsquo;s of data which is kinda useful for practicing indexing.</p>
<h2 id=creating-the-database>Creating the database</h2>
<p>Login to your postgresql interactive terminal using the following bash command:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo -u postgres psql
</code></pre></div><p>Before we create the database we need to create a user. We will be using the <code>postgres</code> user for this.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> universityadmin <span style=color:#66d9ef>WITH</span> <span style=color:#66d9ef>PASSWORD</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</code></pre></div><p>THe password part can be anything you want. It is also kinda optional but I would recommend you to use it. Also you can use <code>ENCRYPTED</code> keyword before your password to encrypt it.</p>
<p>Now we need to create a database. We can do this by running the following command in the terminal.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> university;
</code></pre></div><p>Now we need to grant all the privileges to the user we created earlier. We can do this by running the following command.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>ALL</span> <span style=color:#66d9ef>PRIVILEGES</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DATABASE</span> university <span style=color:#66d9ef>TO</span> universityadmin;
</code></pre></div><p>This will grant all the privileges to the user we created earlier. The <code>GRANT</code> command has two basic types, one which grants privileges on database objects which include tables, columns, databases, views etc, and the other one that grants membership in a role. You can also grant specific privileges to the user. You can read more about it <a href=https://www.postgresql.org/docs/current/sql-grant.html>here</a>.
After creating the user and the database we need can login using the user we created provided a user with the same username exists in our system :). To logout from the postgresql terminal we can use:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#960050;background-color:#1e0010>\</span>q
</code></pre></div><p>Then we can login using the user we created earlier.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>psql -U universityadmin -d university
</code></pre></div><p>But if the UNIX user universityadmin doesn&rsquo;t exist this will throw an error <code>psql: FATAL: Peer authentication failed for user "universityadmin"</code>. So either we directly login to the database or we canstart a forced socket connection to the database using the following command:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>psql --host<span style=color:#f92672>=</span>localhost --dbname<span style=color:#f92672>=</span>university --username<span style=color:#f92672>=</span>postgres
</code></pre></div><h2 id=creating-the-tables>Creating the tables</h2>
<p>After that we create the tables.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> department (
    deptid VARCHAR(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    deptname VARCHAR(<span style=color:#ae81ff>60</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    doe TIMESTAMPTZ <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>
);
</code></pre></div><p>I have kept deptname of size 60. I will change this later to demonstrate the <code>ALTER</code> keyword and how to alter the size of a column in a table.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> employee (
    empid VARCHAR(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    dob TIMESTAMPTZ <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    doj TIMESTAMPTZ <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    deptid VARCHAR(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>
);
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> student (
    id VARCHAR(<span style=color:#ae81ff>15</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    doa TIMESTAMPTZ <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    dob TIMESTAMPTZ <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    chdeptid VARCHAR(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    deptid VARCHAR(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>
);
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> results (
    studentid VARCHAR(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    sem VARCHAR(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    paperid VARCHAR(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    papername VARCHAR(<span style=color:#ae81ff>100</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
    marks INT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>
);
</code></pre></div><p>To see all the tables that you have created you can use the following command:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#960050;background-color:#1e0010>\</span>dt
</code></pre></div><p>This is how the output looks like:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>           List of relations
 Schema |    Name    | Type  |  Owner   
--------+------------+-------+----------
 public | department | table | postgres
 public | employee   | table | postgres
 public | results    | table | postgres
 public | student    | table | postgres
</code></pre></div><h2 id=add-data-to-the-tables>Add data to the tables</h2>
<p>We will use the csv files from thge university dataset to add data to the tables. We can use the following command to add data to the tables:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>COPY</span> department <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;&lt;path to your downloaded Department_Information.csv file or txt file&gt;&#39;</span> <span style=color:#66d9ef>DELIMITER</span> <span style=color:#e6db74>&#39;,&#39;</span> <span style=color:#66d9ef>CSV</span> <span style=color:#66d9ef>HEADER</span>;
</code></pre></div><p>Make sure to replace the path with the complete path of the file. This command throw an error like this&mldr;</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>ERROR:  value too long for type character varying(60)
CONTEXT:  COPY department, line 26, column deptname: &#34;Centre for Formal Design and Verification of Software (CFDVS)&#34;
</code></pre></div><p>But fear not :), we can fix this easily by using the <code>ALTER</code> keyword. We can use the following command to change the size of the column:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> department <span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>COLUMN</span> deptname <span style=color:#66d9ef>TYPE</span> VARCHAR(<span style=color:#ae81ff>200</span>);
</code></pre></div><p>Now if we rerun the <code>COPY</code> command we will be able to add the data to the table. To verify that the data has been added we can use the following command:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-postgresql data-lang=postgresql><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> department;
</code></pre></div><p>Your output should be something like this:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>  deptid   |                                  deptname                                  |            doe            
-----------+----------------------------------------------------------------------------+---------------------------
 IDEPT4670 | Aerospace Engineering                                                      | 1961-05-31 05:30:00+05:30
 IDEPT5528 | Biosciences and Bioengineering                                             | 1943-06-28 06:30:00+06:30
 IDEPT3115 | Chemical Engineering                                                       | 1940-05-01 05:30:00+05:30
 IDEPT5881 | Chemistry                                                                  | 2013-06-08 05:30:00+05:30
 IDEPT4938 | Civil Engineering                                                          | 1941-10-27 06:30:00+06:30
 IDEPT1423 | Computer Science &amp; Engineering                                             | 1941-05-03 05:30:00+05:30
 IDEPT4132 | Earth Sciences                                                             | 1982-08-19 05:30:00+05:30
 IDEPT2054 | Electrical Engineering                                                     | 1985-05-27 05:30:00+05:30
 IDEPT2357 | Energy Science and Engineering                                             | 2007-03-28 05:30:00+05:30
 IDEPT1537 | Humanities &amp; Social Science                                                | 1953-09-14 05:30:00+05:30
</code></pre></div><p>We can repeat this for other tables as well. Simply replace the full path of your files and the table name. PS there are some errors that you may face but you can fix them easily from this point onwards I believe :).</p>
<h2 id=key-takeaways>Key takeaways</h2>
<p>This maybe the shittiest schema design ever&mldr; There is literally no primary key or foreign keys in these schemas&mldr; But it is just for demonstration purposes :). In the next blog I would be normalizing/breaking/building (call it whatever you want because I&rsquo;ll be using some cool postgresql stuffs like arrays :P) these tables into manageable tables with proper relationships.</p>
<h2 id=simple-queries-to-get-you-started>Simple queries to get you started</h2>
<p>We have already come across three to four commands already namely CREATE, ALTER, SELECT and COPY. There are many more commands that you can use to perform various operations on the database. I will be listing some of the commands that I use frequently. You can read more about them <a href=https://www.postgresql.org/docs/current/sql-commands.html>here</a>.</p>
</section>
<div class=post-tags>
</div>
</article>
</main>
<footer>
<div style=display:flex><a class=soc href=https://github.com/ArkaprabhaChakraborty title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://twitter.com/FValkyrie_17 title=Twitter><i data-feather=twitter></i></a>
<a class=border></a><a class=soc href=https://gitlab.com/ArkaprabhaChakraborty title=GitLab><i data-feather=gitlab></i></a>
<a class=border></a><a class=soc href=https://www.linkedin.com/in/arkaprabhachakraborty/ title=LinkedIn><i data-feather=linkedin></i></a>
<a class=border></a></div>
<div class=footer-info>
2023 © ArkaprabhaChakraborty |
</div>
</footer>
<script>feather.replace({style:'max-height:15px !important'})</script></div>
</body>
</html>