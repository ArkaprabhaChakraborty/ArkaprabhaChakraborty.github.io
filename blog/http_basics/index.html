<!doctype html><html><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>HTTP and HTTPS Basics - How the internet works - Arkaprabha Chakraborty</title><link rel=icon type=image/png href=https://images.assetsdelivery.com/compings_v2/uasumy/uasumy1503/uasumy150300032.jpg><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="HTTP (HyperText Transfer Protocol) Most internet communications are made with web requests through the HTTP protocol. HTTP is an application-level protocol used to access the World Wide Web resources. The term hypertext stands for text containing links to other resources and text that the readers can easily interpret.
HTTP communication involves a client sending a request for a resource to a server, which then processes the request and returns the resource.">
<meta property="og:image" content="https://raw.githubusercontent.com/athul/archie/master/images/archie-dark.png">
<meta property="og:title" content="HTTP and HTTPS Basics - How the internet works">
<meta property="og:description" content="HTTP (HyperText Transfer Protocol) Most internet communications are made with web requests through the HTTP protocol. HTTP is an application-level protocol used to access the World Wide Web resources. The term hypertext stands for text containing links to other resources and text that the readers can easily interpret.
HTTP communication involves a client sending a request for a resource to a server, which then processes the request and returns the resource.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://arkaprabhachakraborty.github.io/blog/http_basics/"><meta property="article:section" content="blog">
<meta property="article:published_time" content="2022-01-10T00:00:00+00:00">
<meta property="article:modified_time" content="2022-01-10T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="HTTP and HTTPS Basics - How the internet works">
<meta name=twitter:description content="HTTP (HyperText Transfer Protocol) Most internet communications are made with web requests through the HTTP protocol. HTTP is an application-level protocol used to access the World Wide Web resources. The term hypertext stands for text containing links to other resources and text that the readers can easily interpret.
HTTP communication involves a client sending a request for a resource to a server, which then processes the request and returns the resource.">
<script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel=stylesheet>
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel=stylesheet>
<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://arkaprabhachakraborty.github.io/css/main.561e2ba2eab63e6ba89dd13267009c61d2378a48947490abfcc9457b14dcbad4.css>
<link id=darkModeStyle rel=stylesheet type=text/css href=https://arkaprabhachakraborty.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css disabled>
</head>
<body>
<div class=content><header>
<div class=main>
<a href=https://arkaprabhachakraborty.github.io//home>Arkaprabha Chakraborty</a>
</div>
<nav>
<a href=/blog/all_of_my_blogs>Blogs</a>
<a href=/posts>Projects</a>
| <a id=dark-mode-toggle onclick=toggleTheme() href></a>
<script src=https://arkaprabhachakraborty.github.io/js/themetoggle.js></script>
</nav>
</header>
<main>
<article>
<div class=title>
<h1 class=title>
HTTP and HTTPS Basics - How the internet works
</h1>
<div class=meta>
Posted on Jan 10, 2022
</div>
</div>
<section class=body>
<h1 id=http-hypertext-transfer-protocolhttpswwwrfc-editororgrfcrfc2616><a href=https://www.rfc-editor.org/rfc/rfc2616>HTTP (HyperText Transfer Protocol)</a></h1>
<p>Most internet communications are made with web requests through the HTTP protocol. HTTP is an application-level protocol used to access the World Wide Web resources. The term hypertext stands for text containing links to other resources and text that the readers can easily interpret.</p>
<p>HTTP communication involves a client sending a request for a resource to a server, which then processes the request and returns the resource. We use the same technique to access webpages/visit different websites, we provide a <a href=https://en.wikipedia.org/wiki/Fully_qualified_domain_name>Fully Qualified Domain Name (FQDN)</a> as a <a href=https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_URL>Uniform Resource Locator (URL)</a>, which is just a very specific <a href=https://en.wikipedia.org/wiki/Uniform_Resource_Identifier>Uniform Resource Identifier (URI)</a>. Read this <a href="https://www.hostinger.com/tutorials/uri-vs-url#:~:text=URI%20identifies%20a%20resource%20and,a%20domain%20name%20and%20port.">blog</a> from Hostinger to know more</p>
<p>The default port for HTTP is 80, though this can be changed to any other port and depends on the web-server program&rsquo;s configuration.</p>
<h1 id=url>URL</h1>
<p>This a sample URL. The different components of the URL are explained below in the table.
<img src=https://raw.githubusercontent.com/ArkaprabhaChakraborty/ArkaprabhaChakraborty.github.io/main/data/images/url_structure.png alt="URL structure Image - Courtesy HTB Academy modules"></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Scheme</td>
<td>http:// https://</td>
<td>This is used to identify the protocol being accessed by the client, and ends with a colon and a double slash (://)</td>
</tr>
<tr>
<td>User Info</td>
<td>admin:password@</td>
<td>This is an optional component that contains the credentials (separated by a colon :) used to authenticate to the host, and is separated from the host with an at sign (@)</td>
</tr>
<tr>
<td>Host</td>
<td>inlanefreight.com</td>
<td>The host signifies the resource location. This can be a hostname or an IP address</td>
</tr>
<tr>
<td>Port</td>
<td>:80</td>
<td>The Port is separated from the Host by a colon (:). If no port is specified, http schemes default to port 80 and https default to port 443</td>
</tr>
<tr>
<td>Path</td>
<td>/dashboard.php</td>
<td>This points to the resource being accessed, which can be a file or a folder. If there is no path specified, the server returns the default index (e.g. index.html).</td>
</tr>
<tr>
<td>Query String</td>
<td>?login=true</td>
<td>The query string starts with a question mark (?), and consists of a parameter (e.g. login) and a value (e.g. true). Multiple parameters can be separated by an ampersand (&).</td>
</tr>
<tr>
<td>Fragments</td>
<td>#status</td>
<td>Fragments are processed by the browsers on the client-side to locate sections within the primary resource (e.g. a header or section on the page).</td>
</tr>
</tbody>
</table>
<p>Not all components are required to access a resource. The main mandatory fields are the scheme and the host, without which the request would have no resource to request.</p>
<h1 id=http-information-flow>HTTP Information Flow</h1>
<p><img src=https://raw.githubusercontent.com/ArkaprabhaChakraborty/ArkaprabhaChakraborty.github.io/main/data/images/HTTP_Flow.png alt="HTTP Information Flow - Courtesy HTB Academy modules"></p>
<p><strong>Note: Our browsers usually first look up records in the local &lsquo;/etc/hosts&rsquo; file, and if the requested domain does not exist within it, then they would contact other DNS servers. We can use the &lsquo;/etc/hosts&rsquo; to manually add records to for DNS resolution, by adding the IP followed by the domain name.</strong></p>
<h1 id=https-http-securehttpswwwrfc-editororgrfcrfc2660><a href=https://www.rfc-editor.org/rfc/rfc2660>HTTPS (HTTP Secure)</a></h1>
<p>HTTPS is the secure version of HTTP, which uses encryption protocol to encrypt the communication between the client and the server. This encryption protocol is called <a href=https://en.wikipedia.org/wiki/Transport_Layer_Security>Transport Layer Security (TLS)</a>, although formerly it was known as <a href=https://www.cloudflare.com/en-gb/learning/ssl/what-is-ssl/>Secure Sockets Layer (SSL)</a>. The default port for HTTPS is 443, though this can be changed to any other port and depends on the web-server program&rsquo;s configuration.</p>
<p>Let&rsquo;s take a look at what&rsquo;s changed, shall we? Well then&mldr; Here is a dump/packet capture of an HTTP request.</p>
<p><img src=https://raw.githubusercontent.com/ArkaprabhaChakraborty/ArkaprabhaChakraborty.github.io/main/data/images/http_wireshark_dump.png alt="HTTP Dump"></p>
<p>See how everything is in plain text and everything is readable by the sniffer? Now let&rsquo;s take a look at the HTTPS dump.</p>
<p><img src=https://raw.githubusercontent.com/ArkaprabhaChakraborty/ArkaprabhaChakraborty.github.io/main/data/images/https_wireshark_dump.png alt="HTTPS Dump">
See the gibberish in blue? That&rsquo;s because the data is encrypted. The client and the server use a shared secret key to encrypt and decrypt the data.</p>
<p><strong>Note: Although the data transferred through the HTTPS protocol may be encrypted, the request may still reveal the visited URL if it contacted a clear-text DNS server. For this reason, it is recommended to utilize encrypted DNS servers (e.g. 8.8.8.8 or 1.2.3.4), or utilize a VPN service to ensure all traffic is properly encrypted.</strong></p>
<p>Let&rsquo;s take a look at how HTTPS operates. The schematic below gives a good overview of how HTTPS works.</p>
<p><img src=https://raw.githubusercontent.com/ArkaprabhaChakraborty/ArkaprabhaChakraborty.github.io/main/data/images/HTTPS_Flow.png alt="How HTTPS works - Courtesy HTB Academy"></p>
<p>Here&rsquo;s what happens when you visit a website using HTTPS:</p>
<ul>
<li>When we type in <a href>https://</a> in the URL bar, the browser first looks up the domain name in the local &lsquo;/etc/hosts&rsquo; file, and if the requested domain does not exist within it, then it contacts other DNS servers.</li>
<li>Next the browser sends a
<code style=background-color:blue><span style=color:blue;filter:grayscale(1)invert(1)contrast(100)>client hello</span></code> request at the specified port. This just contains client&rsquo;s supported TLS versions and cipher suites.</li>
<li>After receiving the
<code style=background-color:blue><span style=color:blue;filter:grayscale(1)invert(1)contrast(100)>client hello</span></code> the server sends a
<code style=background-color:#f0f><span style=color:#f0f;filter:grayscale(1)invert(1)contrast(100)>server hello</span></code> request, which contains the server&rsquo;s supported TLS versions and cipher suites, followed by a <a href=https://en.wikipedia.org/wiki/Key_exchange>
<code style=background-color:#f0f><span style=color:#f0f;filter:grayscale(1)invert(1)contrast(100)>Server key exchange</span></code></a> to exchange SSL (or more correctly TLS) certificates.</li>
<li>The client then verifies the server&rsquo;s certificate/key, with the certificate authority that issued it. This confirms that the server is who it says it is, and that the client is interacting with the actual owner of the domain.</li>
<li>If the server&rsquo;s certificate is valid, the client then sends a
<code style=background-color:blue><span style=color:blue;filter:grayscale(1)invert(1)contrast(100)>client key exchange</span></code> request, which contains one of the client&rsquo;s certificate.</li>
<li>Following the above the client initiates an
<code style=background-color:cyan><span style=color:cyan;filter:grayscale(1)invert(1)contrast(100)>encrypted handshake</span></code>, by sending one more random string of bytes, also called the
<code style=background-color:#ff0><span style=color:#ff0;filter:grayscale(1)invert(1)contrast(100)>premaster secret</span></code> - is encrypted with the public key, received by the client from the server&rsquo;s SSL certificate, and can only be decrypted with the private key by the server.</li>
<li>The server decrypts the premaster secret with its private key.</li>
<li>Both client and server generate
<code style=background-color:green><span style=color:green;filter:grayscale(1)invert(1)contrast(100)>session keys</span></code> from the client random, the server random, and the premaster secret. Both should arrive at the same conclusion.</li>
<li>The client sends a
<code style=background-color:blue><span style=color:blue;filter:grayscale(1)invert(1)contrast(100)>change cipher spec</span></code> request, which tells the server that the client is ready to start sending encrypted data, along with a Finished message.</li>
<li>The Finished message from server is then sent to indicate that the handshake is complete on the client side.</li>
</ul>
<p>This is how the flow of information is, but the implementation is a bit different for each TLS versions. For eg:
Consider the TLS 1.2 handshaking process as shown below:</p>
<p><img src=https://raw.githubusercontent.com/ArkaprabhaChakraborty/ArkaprabhaChakraborty.github.io/main/data/images/Two-Roundtrip-Handshake.png alt="TLS 1.2 Handshaking Process"></p>
<p>Now look at the TLS 1.3 handshaking process: (KA means Key Agreement)</p>
<p><img src=https://raw.githubusercontent.com/ArkaprabhaChakraborty/ArkaprabhaChakraborty.github.io/main/data/images/Single-Round-Trip-Handshake-1.png alt="TLS 1.3 Handshaking Process"></p>
<p><strong>Note: A cipher suite is a set of algorithms for use in establishing a secure communications connection. There are a number of cipher suites in wide use, and an essential part of the TLS handshake is agreeing upon which cipher suite will be used for that handshake.</strong></p>
<p>For more information on HTTPS and TLS, check out the following links:</p>
<ul>
<li><a href="https://www.thesslstore.com/blog/explaining-ssl-handshake/#:~:text=The%20%E2%80%9CChange%20Cipher%20Spec%E2%80%9D%20message,complete%20on%20the%20client%20side.">Patrick Nohe&rsquo;s Blog- Taking a Closer Look at the SSL/TLS Handshake</a></li>
<li><a href=https://tiptopsecurity.com/how-does-https-work-rsa-encryption-explained/>How HTTPS &ldquo;Used to&rdquo; work before RSA was broken :(</a></li>
<li><a href=https://www.rfc-editor.org/rfc/rfc8446>TLS RFC</a></li>
<li><a href=https://www.cloudflare.com/en-gb/learning/ssl/what-is-ssl/>What is SSL?</a></li>
</ul>
</section>
<div class=post-tags>
</div>
</article>
</main>
<footer>
<div style=display:flex><a class=soc href=https://github.com/ArkaprabhaChakraborty title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://twitter.com/FValkyrie_17 title=Twitter><i data-feather=twitter></i></a>
<a class=border></a><a class=soc href=https://gitlab.com/ArkaprabhaChakraborty title=GitLab><i data-feather=gitlab></i></a>
<a class=border></a><a class=soc href=https://www.linkedin.com/in/arkaprabhachakraborty/ title=LinkedIn><i data-feather=linkedin></i></a>
<a class=border></a></div>
<div class=footer-info>
2023 © ArkaprabhaChakraborty |
</div>
</footer>
<script>feather.replace({style:'max-height:15px !important'})</script></div>
</body>
</html>